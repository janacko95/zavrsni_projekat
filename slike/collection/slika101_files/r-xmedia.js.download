(window.__LOADABLE_LOADED_CHUNKS__=window.__LOADABLE_LOADED_CHUNKS__||[]).push([[5],{180:function(e,t,n){"use strict";var o=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.buildXmediaUrl=h,t.getVirtualWidth=v,t.getBestImageUrl=y,t.getVideoSource=O,t.loadVideo=function(e,t,o,r){const c=t.offsetWidth,i=v(c),d=y(s({},e,{},{type:"image"}),c);if("hls"!==e.type)o(d,O(e,i));else{if(!m.hls)return o(d);const c=g(m.hls,i),s=e.hlsUrl||h(e,c,null,!0),u=function(){const e=window.MediaSource||window.WebKitMediaSource,t=window.SourceBuffer||window.WebKitSourceBuffer,n=e&&"function"==typeof e.isTypeSupported&&e.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"'),o=!t||t.prototype&&"function"==typeof t.prototype.appendBuffer&&"function"==typeof t.prototype.remove;return!!n&&!!o}();if(a.canUseDOM&&/Android/i.test(window.navigator.userAgent)||"probably"!==(l="hls",document.createElement("video").canPlayType({ogg:'video/ogg; codecs="theora"',h264:'video/mp4; codecs="avc1.42E01E"',webm:'video/webm; codecs="vp8, vorbis"',vp9:'video/webm; codecs="vp9"',hls:'application/x-mpegURL; codecs="avc1.42E01E"'}[l]||l)))u?n.e(562).then(n.t.bind(null,2480,7)).then(({default:n})=>{const a=new n({autoStartLoad:!0});a.on(n.Events.MANIFEST_PARSED,(function(e,t){let n=0;for(let e=0;e<t.levels.length&&(n=e,!(t.levels[e].width>i));e++);a.autoLevelCapping=n,o(d,null,a)})),a.once(n.Events.ERROR,()=>{e.hlsUrl||(a.destroy(),o(d,O(e,i)))}),r&&a.on(n.Events.SUBTITLE_TRACKS_UPDATED,()=>{const e=a.subtitleTracks.reduce((e,t)=>[...e,...t.forced?[]:[{id:t.id,langCode:t.lang,langName:t.name,active:t.default}]],[]);r(e,e=>{a.subtitleTrack=e})}),a.loadSource(s),a.attachMedia(t)}):o(d,O(e,i));else{if(r){const e=e=>{const t=function(e=[]){return e.map((e,t)=>({id:t,langCode:e.language,langName:e.label,active:"showing"===e.mode,track:e}))}([...e.target]);r(t,e=>{if(t.forEach(e=>{e.track.mode="disabled"}),null!==e){var n;const o=null===(n=t.find(t=>t.id===e))||void 0===n?void 0:n.track;o&&(o.mode="showing")}})};t.textTracks.onaddtrack=e,t.textTracks.onchange=e}o(d,{type:"application/x-mpegURL",url:s})}}var l},t.getWatermarkUrl=function(e){if(!e)return null;const t=function(e,t){const n=function(e,t){if(c.default.xmediaTransformations&&c.default.xmediaTransformations.length&&e.transformations&&e.transformations.length){const n=c.default.xmediaTransformations.find(n=>e.transformations.indexOf(n.name)>-1&&n.type===t);return n&&n.meta.xmedia||[]}return[]}(e,t);let o=n.find(t=>t.kind===e.kind);o||(o=n.find(e=>"other"===e.kind));return o}(e,"watermark"),n=p.find(e=>"svg"===e.codecs);if(t&&n)return h(t,n,null,!0);return null},t.xmediaFormats=t.getXmediaBaseUrl=t.XMEDIA_FORMAT_TYPES=void 0;var r=o(n(2)),a=n(11),c=o(n(6));function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){(0,r.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const d={SMALL:135,MEDIUM:560,LARGE:1024,EXTRALARGE:1920};function l(e){switch(e){case"image":case"vector":case"png":case"3dadvanced":case"spin360":return c.default.imageBaseUrl;case"video":case"hls":return c.default.videoBaseUrl}}const u={IMAGE_FORMAT:"image",VIDEO_FORMAT:"video",VECTOR_FORMAT:"vector",PNG_FORMAT:"png",HLS_FORMAT:"hls",ADVANCED_3D_FORMAT:"3dadvanced",SPIN_360:"spin360"};t.XMEDIA_FORMAT_TYPES=u;t.getXmediaBaseUrl=e=>l(e);const f={vector:["pdf"]};const p=c.default.xmediaFormats.sort((e,t)=>e.width>t.width?1:-1);t.xmediaFormats=p;const m=p.reduce((e,t)=>{var n;return e[t.type]=e[t.type]||{formats:[],cache:{}},(f[(n=t).type]||[]).includes(n.extension)||e[t.type].formats.push(t),e},{});function h(e,t,n,o=!1){if(e.url)return e.url;const r="."+t.extension,a=n||t.width;let c;return e&&e.name?(c=~e.name.indexOf(".")?e.name.replace(/\d.$/,r):e.name.concat(r),o?"".concat(l(t.type),"/").concat(e.path,"/").concat(c,"?ts=").concat(e.timestamp):"".concat(l(t.type),"/").concat(e.path,"/w/").concat(a,"/").concat(c,"?ts=").concat(e.timestamp)):""}function g(e,t,n={}){const o=e.formats,r=e.cache[t],i="ceil"!==n.strategy&&a.canUseDOM&&zara&&zara.expApi&&~zara.expApi.activatedExperiments.indexOf("request-smaller-product-image");let d,l,u;if(r)return r;if(!i&&c.default.store.useXmediaRealWidth&&o.length)return e.cache[t]=s({},o[0],{width:t}),e.cache[t];for(l=0,u=o.length;l<u;l++)if(d=o[l],d.width>=t)return e.cache[t]=o[i&&l?l-1:l],e.cache[t];return e.cache[t]=o[o.length-1],o[o.length-1]}function v(e,t){const n=t&&t.forcedDevicePixelRatio||(a.canUseDOM?Math.min(devicePixelRatio||1,2):1);return Math.ceil(e*n)}function y(e,t,n){const o=e.type||"image";let r;if(!e)return"";"string"==typeof t&&(t=d[t]||560),r=v(t,n);const a=g(m[o],r,n),c="vector"===a.type;return h(e,a,a.width,c)}function O(e,t){const n=g(m.video,t);return{url:h(e,n),type:"video/".concat(n.extension)}}}}]);